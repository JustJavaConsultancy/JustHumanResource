<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>KPI Measurements Table Fragment</title>
</head>
<body>
<div id="measurementsTable">
    <table class="w-full">
        <thead class="bg-gray-50 dark:bg-gray-750">
        <tr>
            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400">Employee</th>
            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400">Period</th>
            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400">KPIs Measured</th>
            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400">Score</th>
            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400">Actions</th>
        </tr>
        </thead>

        <!-- Table body with two variants: data rows or empty message -->
        <tbody th:if="${not #lists.isEmpty(measurements)}">
        <tr th:each="measurement : ${measurements}" class="table-row">
            <td class="px-4 py-3">
                <div th:text="${measurement.employee.firstName + ' ' + measurement.employee.lastName}" class="font-medium">Jane Smith</div>
                <div th:text="${measurement.employee.department.name}" class="text-sm text-gray-500">Engineering</div>
            </td>
            <td th:text="${#temporals.format(measurement.period, 'MMMM yyyy')}" class="px-4 py-3">January 2024</td>
            <td class="px-4 py-3">
                <!-- Example of dynamic KPI count; adjust as needed -->
                <div>2 KPIs</div>
            </td>
            <td class="px-4 py-3">
                <div class="flex items-center">
                    <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                        <!-- Dynamically set width and color class based on score -->
                        <div class="h-2 rounded-full kpi-score-excellent" style="width:92.8%"></div>
                    </div>
                    <span>92.8</span>
                </div>
            </td>
            <td class="px-4 py-3">
                <button th:onclick="'viewMeasurementDetails(' + ${measurement.id} + ')'" class="text-primary-600 hover:text-primary-900 mr-3">
                    <span class="material-icons-round text-sm">visibility</span>
                </button>
                <button th:onclick="'editMeasurement(' + ${measurement.id} + ')'" class="text-blue-600 hover:text-blue-900">
                    <span class="material-icons-round text-sm">edit</span>
                </button>
            </td>
        </tr>
        </tbody>

        <!-- Empty state message -->
        <tbody th:if="${#lists.isEmpty(measurements)}">
        <tr>
            <td colspan="5" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                No measurements found.
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>