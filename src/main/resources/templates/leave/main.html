<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet"/>
  <script>
    tailwind.config = {
        darkMode: "class",
        theme: {
            extend: {
                colors: {
                    primary: {
                        50: '#eff6ff',
                        100: '#dbeafe',
                        200: '#bfdbfe',
                        300: '#93c5fd',
                        400: '#60a5fa',
                        500: '#3b82f6',
                        600: '#2563eb',
                        700: '#1d4ed8',
                        800: '#1e40af',
                        900: '#1e3a8a',
                    },
                    secondary: {
                        50: '#f8fafc',
                        100: '#f1f5f9',
                        200: '#e2e8f0',
                        300: '#cbd5e1',
                        400: '#94a3b8',
                        500: '#64748b',
                        600: '#475569',
                        700: '#334155',
                        800: '#1e293b',
                        900: '#0f172a',
                    }
                },
                fontFamily: {
                    'sans': ['Inter', 'system-ui', '-apple-system', 'sans-serif'],
                },
                borderRadius: {
                    'xl': '1rem',
                    '2xl': '1.5rem',
                }
            },
        },
    };
  </script>
  <style>
    * {
        font-family: 'Inter', sans-serif;
    }

    body {
        overflow-x: hidden;
    }

    .sidebar-item {
        transition: all 0.2s ease;
        position: relative;
    }

    .sidebar-item.active {
        background-color: rgba(59, 130, 246, 0.1);
        color: #3b82f6;
        border-left: 3px solid #3b82f6;
    }

    .sidebar-item.active .material-icons-round {
        color: #3b82f6;
    }

    .sidebar-item:hover:not(.active) {
        background-color: rgba(59, 130, 246, 0.05);
    }

    .dark .sidebar-item.active {
        background-color: rgba(59, 130, 246, 0.2);
    }

    .badge {
        padding: 2px 8px;
        font-size: 0.75rem;
        font-weight: 500;
        border-radius: 9999px;
    }

    .badge-success {
        background-color: #dcfce7;
        color: #16a34a;
    }

    .badge-warning {
        background-color: #fef3c7;
        color: #d97706;
    }

    .badge-error {
        background-color: #fee2e2;
        color: #dc2626;
    }

    .badge-info {
        background-color: #dbeafe;
        color: #2563eb;
    }

    .badge-purple {
        background-color: #f3e8ff;
        color: #9333ea;
    }

    .tab-active {
        background-color: #3b82f6;
        color: white;
    }

    .form-input {
        border: 1px solid #e2e8f0;
        border-radius: 0.5rem;
        padding: 0.75rem;
        width: 100%;
        transition: border-color 0.2s;
    }

    .form-input:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .modal-backdrop {
        background-color: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
    }

    /* Fix sidebar and main content positioning */
    .sidebar-container {
        position: fixed;
        top: 0;
        left: 0;
        height: 100vh;
        width: 16rem;
        z-index: 40;
        overflow-y: auto;
    }

    .main-content {
        margin-left: 16rem;
        width: calc(100% - 16rem);
        min-height: 100vh;
    }

    @media (max-width: 1023px) {
        .sidebar-container {
            transform: translateX(-100%);
        }

        .sidebar-container.open {
            transform: translateX(0);
        }

        .main-content {
            margin-left: 0;
            width: 100%;
        }
    }

    /* Custom scrollbar */
    .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
        background: #f1f5f9;
        border-radius: 3px;
    }

    .dark .custom-scrollbar::-webkit-scrollbar-track {
        background: #1e293b;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
        background: #cbd5e1;
        border-radius: 3px;
    }

    .dark .custom-scrollbar::-webkit-scrollbar-thumb {
        background: #475569;
    }

    /* Calendar styles */
    .calendar-day {
        width: 2.5rem;
        height: 2.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 9999px;
        cursor: pointer;
        transition: all 0.2s;
    }

    .calendar-day:hover {
        background-color: #e5e7eb;
    }

    .dark .calendar-day:hover {
        background-color: #374151;
    }

    .calendar-day.today {
        background-color: #3b82f6;
        color: white;
    }

    .calendar-day.leave-day {
        background-color: #fef3c7;
        color: #d97706;
    }

    .dark .calendar-day.leave-day {
        background-color: #92400e;
        color: #fef3c7;
    }

    .calendar-day.approved {
        background-color: #dcfce7;
        color: #16a34a;
    }

    .dark .calendar-day.approved {
        background-color: #14532d;
        color: #dcfce7;
    }

    .calendar-day.pending {
        background-color: #fef3c7;
        color: #d97706;
    }

    .dark .calendar-day.pending {
        background-color: #92400e;
        color: #fef3c7;
    }

    .calendar-day.rejected {
        background-color: #fee2e2;
        color: #dc2626;
    }

    .dark .calendar-day.rejected {
        background-color: #7f1d1d;
        color: #fee2e2;
    }

    /* Leave type colors */
    .leave-type-annual {
        background-color: #dbeafe;
        color: #2563eb;
    }

    .leave-type-sick {
        background-color: #fce7f3;
        color: #db2777;
    }

    .leave-type-maternity {
        background-color: #f0f9ff;
        color: #0284c7;
    }

    .leave-type-unpaid {
        background-color: #fef3c7;
        color: #d97706;
    }
  </style>
</head>
</head>
<body>
<main layout:fragment="content">
  <!-- Stats Cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8">
    <!-- Pending Approvals -->
    <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 md:p-6">
      <div class="flex items-center justify-between mb-4">
        <div class="p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg">
          <span class="material-icons-round text-yellow-600 dark:text-yellow-400">pending_actions</span>
        </div>
        <span class="badge badge-warning">Urgent</span>
      </div>
      <h3 class="text-2xl font-bold mb-1">15</h3>
      <p class="text-gray-600 dark:text-gray-400 text-sm">Pending Approvals</p>
      <div class="mt-3">
        <div class="flex justify-between text-xs mb-1">
          <span class="text-gray-500">This Week</span>
          <span class="font-medium">8 new</span>
        </div>
      </div>
    </div>

    <!-- On Leave Today -->
    <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 md:p-6">
      <div class="flex items-center justify-between mb-4">
        <div class="p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg">
          <span class="material-icons-round text-blue-600 dark:text-blue-400">calendar_today</span>
        </div>
        <span class="text-sm text-gray-500">Today</span>
      </div>
      <h3 class="text-2xl font-bold mb-1">42</h3>
      <p class="text-gray-600 dark:text-gray-400 text-sm">On Leave Today</p>
      <div class="mt-3">
        <div class="flex items-center text-xs text-gray-500">
          <span class="material-icons-round text-xs mr-1">event</span>
          <span>12 Annual, 5 Sick, 3 Unpaid</span>
        </div>
      </div>
    </div>

    <!-- Approved This Month -->
    <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 md:p-6">
      <div class="flex items-center justify-between mb-4">
        <div class="p-3 bg-green-100 dark:bg-green-900/30 rounded-lg">
          <span class="material-icons-round text-green-600 dark:text-green-400">check_circle</span>
        </div>
        <span class="text-sm text-gray-500">This Month</span>
      </div>
      <h3 class="text-2xl font-bold mb-1">124</h3>
      <p class="text-gray-600 dark:text-gray-400 text-sm">Approved Leaves</p>
      <div class="mt-3">
        <div class="flex items-center text-xs text-gray-500">
          <span class="material-icons-round text-xs mr-1">trending_up</span>
          <span>+18% from last month</span>
        </div>
      </div>
    </div>

    <!-- Rejected This Month -->
    <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 md:p-6">
      <div class="flex items-center justify-between mb-4">
        <div class="p-3 bg-red-100 dark:bg-red-900/30 rounded-lg">
          <span class="material-icons-round text-red-600 dark:text-red-400">cancel</span>
        </div>
        <span class="text-sm text-gray-500">This Month</span>
      </div>
      <h3 class="text-2xl font-bold mb-1">8</h3>
      <p class="text-gray-600 dark:text-gray-400 text-sm">Rejected Leaves</p>
      <div class="mt-3">
        <div class="flex items-center text-xs text-gray-500">
          <span class="material-icons-round text-xs mr-1">info</span>
          <span>Mostly due to policy violations</span>
        </div>
      </div>
    </div>
  </div>
  <div style="display:flex;justify-content:end;margin-bottom:20px">
  <button onclick="openModal('addLeaveModal')" class="hidden md:flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors">
    <span class="material-icons-round text-sm">add</span>
    <span>Add Leave</span>
  </button>
    </div>

  <!-- Two Column Layout -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6 mb-6 md:mb-8">
    <!-- Left Column: Pending Requests -->
    <div class="lg:col-span-2">
      <!-- Pending Requests -->
      <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700">
        <div class="p-4 md:p-6 border-b border-gray-200 dark:border-gray-700">
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
              <span class="material-icons-round text-yellow-600">pending</span>
              <h3 class="text-lg font-bold">Pending Leave Requests</h3>
            </div>
            <button class="text-primary-600 hover:text-primary-700 text-sm font-medium">View All</button>
          </div>
        </div>

        <div class="divide-y divide-gray-200 dark:divide-gray-700">
          <!-- Request 1 -->
          <div class="p-4 md:p-6 hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors">
            <div class="flex flex-col md:flex-row md:items-center justify-between mb-4 gap-2">
              <div class="flex items-center space-x-4">
                <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=48&h=48&q=80"
                     class="w-10 h-10 md:w-12 md:h-12 rounded-full">
                <div>
                  <p class="font-medium">Sarah Jenkins</p>
                  <div class="flex items-center space-x-3">
                    <span class="badge badge-info">Annual PTO</span>
                    <span class="text-sm text-gray-500 dark:text-gray-400">5 days</span>
                  </div>
                </div>
              </div>
              <div class="flex flex-col items-end">
                <span class="text-sm font-medium text-gray-500">Jan 15-19, 2024</span>
                <span class="text-xs text-gray-500">Due Today</span>
              </div>
            </div>
            <div class="flex flex-col md:flex-row md:items-center justify-between gap-3">
              <div>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Medical appointment with follow-up consultations</p>
                <div class="flex flex-wrap gap-3">
                  <div class="flex items-center space-x-2">
                    <span class="material-icons-round text-xs text-gray-400">business</span>
                    <span class="text-xs text-gray-500">Engineering</span>
                  </div>
                  <div class="flex items-center space-x-2">
                    <span class="material-icons-round text-xs text-gray-400">work</span>
                    <span class="text-xs text-gray-500">Grade 6 • Level 2</span>
                  </div>
                </div>
              </div>
              <div class="flex flex-col sm:flex-row gap-3 mt-3 md:mt-0">
                <div class="flex items-center space-x-4">
                  <label class="flex items-center space-x-2">
                    <input type="radio" name="payment-sarah" value="with" class="text-primary-600">
                    <span class="text-sm">With Payment</span>
                  </label>
                  <label class="flex items-center space-x-2">
                    <input type="radio" name="payment-sarah" value="without" class="text-primary-600">
                    <span class="text-sm">Without Payment</span>
                  </label>
                </div>
                <div class="flex space-x-3">
                  <button onclick="rejectLeave(1)" class="px-3 md:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700">Deny</button>
                  <button onclick="approveLeave(1)" class="px-3 md:px-4 py-2 bg-primary-600 text-white rounded-lg text-sm font-medium hover:bg-primary-700">Approve</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Request 2 -->
          <div class="p-4 md:p-6 hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors">
            <div class="flex flex-col md:flex-row md:items-center justify-between mb-4 gap-2">
              <div class="flex items-center space-x-4">
                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=48&h=48&q=80"
                     class="w-10 h-10 md:w-12 md:h-12 rounded-full">
                <div>
                  <p class="font-medium">Mike Ross</p>
                  <div class="flex items-center space-x-3">
                    <span class="badge leave-type-sick">Sick Leave</span>
                    <span class="text-sm text-gray-500 dark:text-gray-400">3 days</span>
                  </div>
                </div>
              </div>
              <div class="flex flex-col items-end">
                <span class="text-sm font-medium text-gray-500">Jan 22-24, 2024</span>
                <span class="text-xs text-gray-500">Due in 2 days</span>
              </div>
            </div>
            <div class="flex flex-col md:flex-row md:items-center justify-between gap-3">
              <div>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Flu symptoms with doctor's recommendation for rest</p>
                <div class="flex flex-wrap gap-3">
                  <div class="flex items-center space-x-2">
                    <span class="material-icons-round text-xs text-gray-400">business</span>
                    <span class="text-xs text-gray-500">Sales</span>
                  </div>
                  <div class="flex items-center space-x-2">
                    <span class="material-icons-round text-xs text-gray-400">work</span>
                    <span class="text-xs text-gray-500">Grade 5 • Level 3</span>
                  </div>
                </div>
              </div>
              <div class="flex flex-col sm:flex-row gap-3 mt-3 md:mt-0">
                <div class="flex items-center space-x-4">
                  <label class="flex items-center space-x-2">
                    <input type="radio" name="payment-mike" value="with" class="text-primary-600">
                    <span class="text-sm">With Payment</span>
                  </label>
                  <label class="flex items-center space-x-2">
                    <input type="radio" name="payment-mike" value="without" class="text-primary-600">
                    <span class="text-sm">Without Payment</span>
                  </label>
                </div>
                <div class="flex space-x-3">
                  <button onclick="rejectLeave(2)" class="px-3 md:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700">Deny</button>
                  <button onclick="approveLeave(2)" class="px-3 md:px-4 py-2 bg-primary-600 text-white rounded-lg text-sm font-medium hover:bg-primary-700">Approve</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Request 3 -->
          <div class="p-4 md:p-6 hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors">
            <div class="flex flex-col md:flex-row md:items-center justify-between mb-4 gap-2">
              <div class="flex items-center space-x-4">
                <div class="w-10 h-10 md:w-12 md:h-12 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-bold">
                  SM
                </div>
                <div>
                  <p class="font-medium">Sophia Miller</p>
                  <div class="flex items-center space-x-3">
                    <span class="badge leave-type-unpaid">Unpaid Leave</span>
                    <span class="text-sm text-gray-500 dark:text-gray-400">10 days</span>
                  </div>
                </div>
              </div>
              <div class="flex flex-col items-end">
                <span class="text-sm font-medium text-gray-500">Feb 1-10, 2024</span>
                <span class="text-xs text-gray-500">Due in 5 days</span>
              </div>
            </div>
            <div class="flex flex-col md:flex-row md:items-center justify-between gap-3">
              <div>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Personal travel and family commitment overseas</p>
                <div class="flex flex-wrap gap-3">
                  <div class="flex items-center space-x-2">
                    <span class="material-icons-round text-xs text-gray-400">business</span>
                    <span class="text-xs text-gray-500">Product</span>
                  </div>
                  <div class="flex items-center space-x-2">
                    <span class="material-icons-round text-xs text-gray-400">work</span>
                    <span class="text-xs text-gray-500">Grade 4 • Level 2</span>
                  </div>
                </div>
              </div>
              <div class="flex flex-col sm:flex-row gap-3 mt-3 md:mt-0">
                <div class="flex items-center space-x-4">
                  <label class="flex items-center space-x-2">
                    <input type="radio" name="payment-sophia" value="with" class="text-primary-600" disabled>
                    <span class="text-sm text-gray-400">With Payment</span>
                  </label>
                  <label class="flex items-center space-x-2">
                    <input type="radio" name="payment-sophia" value="without" checked class="text-primary-600">
                    <span class="text-sm">Without Payment</span>
                  </label>
                </div>
                <div class="flex space-x-3">
                  <button onclick="rejectLeave(3)" class="px-3 md:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700">Deny</button>
                  <button onclick="approveLeave(3)" class="px-3 md:px-4 py-2 bg-primary-600 text-white rounded-lg text-sm font-medium hover:bg-primary-700">Approve</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Column: Calendar & Quick Stats -->
    <div class="space-y-4 md:space-y-6">
      <!-- Leave Calendar -->
      <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 md:p-6">
        <div class="flex items-center justify-between mb-6">
          <h3 class="text-lg font-bold">Leave Calendar</h3>
          <div class="flex items-center space-x-2">
            <button onclick="prevMonth()" class="p-1 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
              <span class="material-icons-round">chevron_left</span>
            </button>
            <span id="currentMonth" class="text-sm font-medium">January 2024</span>
            <button onclick="nextMonth()" class="p-1 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
              <span class="material-icons-round">chevron_right</span>
            </button>
          </div>
        </div>

        <div class="grid grid-cols-7 gap-1 mb-4">
          <div class="text-center text-xs font-medium text-gray-500 py-2">Sun</div>
          <div class="text-center text-xs font-medium text-gray-500 py-2">Mon</div>
          <div class="text-center text-xs font-medium text-gray-500 py-2">Tue</div>
          <div class="text-center text-xs font-medium text-gray-500 py-2">Wed</div>
          <div class="text-center text-xs font-medium text-gray-500 py-2">Thu</div>
          <div class="text-center text-xs font-medium text-gray-500 py-2">Fri</div>
          <div class="text-center text-xs font-medium text-gray-500 py-2">Sat</div>

          <!-- Calendar Days -->
          <div class="calendar-day"></div>
          <div class="calendar-day"></div>
          <div class="calendar-day">1</div>
          <div class="calendar-day">2</div>
          <div class="calendar-day">3</div>
          <div class="calendar-day">4</div>
          <div class="calendar-day">5</div>

          <div class="calendar-day">6</div>
          <div class="calendar-day">7</div>
          <div class="calendar-day">8</div>
          <div class="calendar-day">9</div>
          <div class="calendar-day">10</div>
          <div class="calendar-day">11</div>
          <div class="calendar-day">12</div>

          <div class="calendar-day">13</div>
          <div class="calendar-day">14</div>
          <div class="calendar-day today">15</div>
          <div class="calendar-day approved">16</div>
          <div class="calendar-day approved">17</div>
          <div class="calendar-day approved">18</div>
          <div class="calendar-day approved">19</div>

          <div class="calendar-day">20</div>
          <div class="calendar-day">21</div>
          <div class="calendar-day pending">22</div>
          <div class="calendar-day pending">23</div>
          <div class="calendar-day pending">24</div>
          <div class="calendar-day">25</div>
          <div class="calendar-day">26</div>

          <div class="calendar-day">27</div>
          <div class="calendar-day">28</div>
          <div class="calendar-day">29</div>
          <div class="calendar-day">30</div>
          <div class="calendar-day">31</div>
          <div class="calendar-day"></div>
          <div class="calendar-day"></div>
        </div>

        <div class="space-y-2">
          <div class="flex items-center space-x-2">
            <div class="w-3 h-3 bg-green-500 rounded-full"></div>
            <span class="text-xs">Approved Leave</span>
          </div>
          <div class="flex items-center space-x-2">
            <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
            <span class="text-xs">Pending Approval</span>
          </div>
          <div class="flex items-center space-x-2">
            <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
            <span class="text-xs">Today</span>
          </div>
        </div>
      </div>

      <!-- Leave Summary -->
      <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 md:p-6">
        <h3 class="text-lg font-bold mb-6">Leave Summary</h3>

        <div class="space-y-4">
          <div>
            <div class="flex justify-between text-sm mb-1">
              <span class="text-gray-600 dark:text-gray-400">Annual Leave Balance</span>
              <span class="font-medium">1,850 days</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill bg-blue-500" style="width: 65%"></div>
            </div>
          </div>

          <div>
            <div class="flex justify-between text-sm mb-1">
              <span class="text-gray-600 dark:text-gray-400">Sick Leave Used</span>
              <span class="font-medium">420 days</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill bg-green-500" style="width: 35%"></div>
            </div>
          </div>

          <div>
            <div class="flex justify-between text-sm mb-1">
              <span class="text-gray-600 dark:text-gray-400">Unpaid Leave</span>
              <span class="font-medium">85 days</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill bg-yellow-500" style="width: 15%"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Leave History Table -->
  <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden">
    <div class="p-4 md:p-6 border-b border-gray-200 dark:border-gray-700">
      <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
        <h3 class="text-lg font-bold">Leave History</h3>
        <div class="flex flex-wrap gap-3">
          <select id="statusFilter" class="form-input py-2 w-full md:w-40">
            <option value="">All Status</option>
            <option value="approved">Approved</option>
            <option value="pending">Pending</option>
            <option value="rejected">Rejected</option>
            <option value="cancelled">Cancelled</option>
          </select>

          <select id="typeFilter" class="form-input py-2 w-full md:w-40">
            <option value="">All Types</option>
            <option value="annual">Annual PTO</option>
            <option value="sick">Sick Leave</option>
            <option value="maternity">Maternity</option>
            <option value="unpaid">Unpaid Leave</option>
            <option value="emergency">Emergency</option>
          </select>

          <input type="month" id="dateFilter" class="form-input py-2 w-full md:w-40" value="2024-01">
        </div>
      </div>
    </div>

    <div class="overflow-x-auto custom-scrollbar">
      <table class="w-full">
        <thead class="bg-gray-50 dark:bg-gray-750">
        <tr>
          <th class="px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Employee</th>
          <th class="px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Leave Type</th>
          <th class="px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Dates</th>
          <th class="px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Days</th>
          <th class="px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Payment</th>
          <th class="px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Status</th>
          <th class="px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Approved By</th>
          <th class="px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Actions</th>
        </tr>
        </thead>
        <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
        <!-- Leave 1 -->
        <tr>
          <td class="px-4 md:px-6 py-4">
            <div class="flex items-center">
              <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=48&h=48&q=80"
                   class="w-8 h-8 rounded-full">
              <div class="ml-3">
                <div class="text-sm font-medium">Sarah Jenkins</div>
                <div class="text-xs text-gray-500">Engineering</div>
              </div>
            </div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <span class="badge leave-type-annual">Annual PTO</span>
          </td>
          <td class="px-4 md:px-6 py-4">
            <div class="text-sm">Dec 20-29, 2023</div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <div class="text-sm font-medium">8</div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <div class="text-sm text-green-600">With Payment</div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <span class="badge badge-success">Approved</span>
          </td>
          <td class="px-4 md:px-6 py-4">
            <div class="text-sm">Alex Morgan</div>
            <div class="text-xs text-gray-500">Dec 15, 2023</div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <button onclick="viewLeaveDetails(1)" class="text-primary-600 hover:text-primary-700 text-sm font-medium">View</button>
          </td>
        </tr>

        <!-- Leave 2 -->
        <tr>
          <td class="px-4 md:px-6 py-4">
            <div class="flex items-center">
              <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=48&h=48&q=80"
                   class="w-8 h-8 rounded-full">
              <div class="ml-3">
                <div class="text-sm font-medium">Mike Ross</div>
                <div class="text-xs text-gray-500">Sales</div>
              </div>
            </div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <span class="badge leave-type-sick">Sick Leave</span>
          </td>
          <td class="px-4 md:px-6 py-4">
            <div class="text-sm">Nov 15-16, 2023</div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <div class="text-sm font-medium">2</div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <div class="text-sm text-green-600">With Payment</div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <span class="badge badge-success">Approved</span>
          </td>
          <td class="px-4 md:px-6 py-4">
            <div class="text-sm">Alex Morgan</div>
            <div class="text-xs text-gray-500">Nov 14, 2023</div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <button onclick="viewLeaveDetails(2)" class="text-primary-600 hover:text-primary-700 text-sm font-medium">View</button>
          </td>
        </tr>

        <!-- Leave 3 -->
        <tr>
          <td class="px-4 md:px-6 py-4">
            <div class="flex items-center">
              <div class="w-8 h-8 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center font-bold">
                SM
              </div>
              <div class="ml-3">
                <div class="text-sm font-medium">Sophia Miller</div>
                <div class="text-xs text-gray-500">Product</div>
              </div>
            </div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <span class="badge leave-type-maternity">Maternity</span>
          </td>
          <td class="px-4 md:px-6 py-4">
            <div class="text-sm">Aug 1 - Oct 31, 2023</div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <div class="text-sm font-medium">92</div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <div class="text-sm text-green-600">With Payment</div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <span class="badge badge-success">Approved</span>
          </td>
          <td class="px-4 md:px-6 py-4">
            <div class="text-sm">HR Department</div>
            <div class="text-xs text-gray-500">Jul 25, 2023</div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <button onclick="viewLeaveDetails(3)" class="text-primary-600 hover:text-primary-700 text-sm font-medium">View</button>
          </td>
        </tr>

        <!-- Leave 4 -->
        <tr>
          <td class="px-4 md:px-6 py-4">
            <div class="flex items-center">
              <div class="w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-bold">
                JD
              </div>
              <div class="ml-3">
                <div class="text-sm font-medium">John Doe</div>
                <div class="text-xs text-gray-500">Engineering</div>
              </div>
            </div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <span class="badge leave-type-unpaid">Unpaid Leave</span>
          </td>
          <td class="px-4 md:px-6 py-4">
            <div class="text-sm">Dec 1-5, 2023</div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <div class="text-sm font-medium">5</div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <div class="text-sm text-gray-500">Without Payment</div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <span class="badge badge-error">Rejected</span>
          </td>
          <td class="px-4 md:px-6 py-4">
            <div class="text-sm">Alex Morgan</div>
            <div class="text-xs text-gray-500">Nov 28, 2023</div>
          </td>
          <td class="px-4 md:px-6 py-4">
            <button onclick="viewLeaveDetails(4)" class="text-primary-600 hover:text-primary-700 text-sm font-medium">View</button>
          </td>
        </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="px-4 md:px-6 py-4 border-t border-gray-200 dark:border-gray-700">
      <div class="flex items-center justify-between">
        <div class="text-sm text-gray-500 dark:text-gray-400">
          Showing <span class="font-medium">1</span> to <span class="font-medium">4</span> of <span class="font-medium">248</span> leaves
        </div>
        <div class="flex space-x-2">
          <button class="px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm hover:bg-gray-50 dark:hover:bg-gray-700">Previous</button>
          <button class="px-3 py-1 bg-primary-600 text-white rounded text-sm">1</button>
          <button class="px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm hover:bg-gray-50 dark:hover:bg-gray-700">2</button>
          <button class="px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm hover:bg-gray-50 dark:hover:bg-gray-700">3</button>
          <button class="px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm hover:bg-gray-50 dark:hover:bg-gray-700">Next</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Leave Modal -->
  <div id="addLeaveModal" class="fixed inset-0 z-50 hidden">
    <div class="modal-backdrop fixed inset-0"></div>
    <div class="fixed inset-0 flex items-center justify-center p-4 custom-scrollbar">
      <div class="bg-white dark:bg-gray-800 rounded-2xl w-full max-w-2xl">
        <div class="p-6 border-b border-gray-200 dark:border-gray-700">
          <div class="flex justify-between items-center">
            <h3 class="text-xl font-bold">Add Leave Request</h3>
            <button onclick="closeModal('addLeaveModal')" class="text-gray-400 hover:text-gray-600">
              <span class="material-icons-round">close</span>
            </button>
          </div>
        </div>

        <div class="p-6">
          <form class="space-y-6">
            <div>
              <label class="block text-sm font-medium mb-2">Employee</label>
              <select class="form-input">
                <option value="">Select employee...</option>
                <option value="sarah">Sarah Jenkins</option>
                <option value="mike">Mike Ross</option>
                <option value="john">John Doe</option>
                <option value="sophia">Sophia Miller</option>
              </select>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label class="block text-sm font-medium mb-2">Leave Type</label>
                <select class="form-input">
                  <option value="annual">Annual PTO</option>
                  <option value="sick">Sick Leave</option>
                  <option value="maternity">Maternity Leave</option>
                  <option value="unpaid">Unpaid Leave</option>
                  <option value="emergency">Emergency Leave</option>
                </select>
              </div>

              <div>
                <label class="block text-sm font-medium mb-2">Payment Type</label>
                <select class="form-input">
                  <option value="with">With Payment</option>
                  <option value="without">Without Payment</option>
                </select>
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label class="block text-sm font-medium mb-2">Start Date</label>
                <input type="date" class="form-input">
              </div>

              <div>
                <label class="block text-sm font-medium mb-2">End Date</label>
                <input type="date" class="form-input">
              </div>
            </div>

            <div>
              <label class="block text-sm font-medium mb-2">Number of Days</label>
              <input type="number" class="form-input" placeholder="Enter number of days" min="0.5" step="0.5">
            </div>

            <div>
              <label class="block text-sm font-medium mb-2">Reason for Leave</label>
              <textarea class="form-input h-32" placeholder="Enter reason for leave..."></textarea>
            </div>

            <div>
              <label class="block text-sm font-medium mb-2">Supporting Documents</label>
              <div class="border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-6 text-center">
                <span class="material-icons-round text-gray-400 text-3xl mb-2">cloud_upload</span>
                <p class="text-sm text-gray-600 dark:text-gray-400">Drag & drop files or click to browse</p>
                <p class="text-xs text-gray-500 mt-1">Maximum file size: 5MB</p>
              </div>
            </div>

            <div class="flex justify-end space-x-3 pt-4">
              <button type="button" onclick="closeModal('addLeaveModal')" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">Cancel</button>
              <button type="submit" class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700">Submit Leave Request</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Leave Details Modal -->
  <div id="leaveDetailsModal" class="fixed inset-0 z-50 hidden">
    <div class="modal-backdrop fixed inset-0"></div>
    <div class="fixed inset-0 flex items-center justify-center p-4 custom-scrollbar">
      <div class="bg-white dark:bg-gray-800 rounded-2xl w-full max-w-4xl">
        <div class="p-6 border-b border-gray-200 dark:border-gray-700">
          <div class="flex justify-between items-center">
            <div>
              <h3 class="text-xl font-bold">Leave Request Details</h3>
              <p class="text-gray-600 dark:text-gray-400">Request ID: LV-2024-00123</p>
            </div>
            <button onclick="closeModal('leaveDetailsModal')" class="text-gray-400 hover:text-gray-600">
              <span class="material-icons-round">close</span>
            </button>
          </div>
        </div>

        <div class="p-6">
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Left Column -->
            <div class="space-y-6">
              <div>
                <h4 class="font-bold mb-4">Employee Information</h4>
                <div class="flex items-center space-x-4">
                  <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=48&h=48&q=80"
                       class="w-16 h-16 rounded-full">
                  <div>
                    <p class="font-bold">Sarah Jenkins</p>
                    <p class="text-gray-600 dark:text-gray-400">Software Engineer • Engineering</p>
                    <p class="text-sm text-gray-500">Grade 6 • Level 2</p>
                  </div>
                </div>
              </div>

              <div>
                <h4 class="font-bold mb-4">Leave Details</h4>
                <div class="space-y-3">
                  <div class="flex justify-between">
                    <span class="text-gray-600 dark:text-gray-400">Leave Type</span>
                    <span class="font-medium">Annual PTO</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-gray-600 dark:text-gray-400">Start Date</span>
                    <span class="font-medium">January 15, 2024</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-gray-600 dark:text-gray-400">End Date</span>
                    <span class="font-medium">January 19, 2024</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-gray-600 dark:text-gray-400">Total Days</span>
                    <span class="font-medium">5 working days</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-gray-600 dark:text-gray-400">Payment Type</span>
                    <span class="font-medium text-green-600">With Payment</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-gray-600 dark:text-gray-400">Status</span>
                    <span class="badge badge-success">Approved</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Right Column -->
            <div class="space-y-6">
              <div>
                <h4 class="font-bold mb-4">Leave Reason</h4>
                <div class="bg-gray-50 dark:bg-gray-750 rounded-lg p-4">
                  <p class="text-gray-700 dark:text-gray-300">Medical appointment with follow-up consultations. Doctor has recommended rest and recovery period.</p>
                </div>
              </div>

              <div>
                <h4 class="font-bold mb-4">Approval Details</h4>
                <div class="space-y-3">
                  <div class="flex justify-between">
                    <span class="text-gray-600 dark:text-gray-400">Approved By</span>
                    <span class="font-medium">Alex Morgan</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-gray-600 dark:text-gray-400">Approval Date</span>
                    <span class="font-medium">January 14, 2024</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-gray-600 dark:text-gray-400">Approval Notes</span>
                    <span class="font-medium">Approved with payment as per policy</span>
                  </div>
                </div>
              </div>

              <div>
                <h4 class="font-bold mb-4">Supporting Documents</h4>
                <div class="flex items-center space-x-3">
                  <div class="flex items-center space-x-2 p-3 border border-gray-200 dark:border-gray-700 rounded-lg">
                    <span class="material-icons-round text-red-500">picture_as_pdf</span>
                    <div>
                      <p class="text-sm font-medium">Medical_Certificate.pdf</p>
                      <p class="text-xs text-gray-500">245 KB</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700">
            <button type="button" onclick="closeModal('leaveDetailsModal')" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">Close</button>
            <button type="button" onclick="printLeaveDetails()" class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700">Print</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Leave Policy Modal -->
  <div id="leavePolicyModal" class="fixed inset-0 z-50 hidden">
    <div class="modal-backdrop fixed inset-0"></div>
    <div class="fixed inset-0 flex items-center justify-center p-4 custom-scrollbar">
      <div class="bg-white dark:bg-gray-800 rounded-2xl w-full max-w-2xl">
        <div class="p-6 border-b border-gray-200 dark:border-gray-700">
          <div class="flex justify-between items-center">
            <h3 class="text-xl font-bold">Leave Policies</h3>
            <button onclick="closeModal('leavePolicyModal')" class="text-gray-400 hover:text-gray-600">
              <span class="material-icons-round">close</span>
            </button>
          </div>
        </div>

        <div class="p-6">
          <div class="space-y-6">
            <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
              <h4 class="font-bold mb-2">Annual Leave (PTO)</h4>
              <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Employees are entitled to 20 working days of paid annual leave per year.</p>
              <div class="text-xs text-gray-500">
                <p>• Accrues at 1.67 days per month</p>
                <p>• Maximum carryover: 5 days to next year</p>
                <p>• Requires 2 weeks advance notice</p>
              </div>
            </div>

            <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
              <h4 class="font-bold mb-2">Sick Leave</h4>
              <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Employees are entitled to 12 working days of paid sick leave per year.</p>
              <div class="text-xs text-gray-500">
                <p>• Medical certificate required after 3 days</p>
                <p>• Can be taken in half-day increments</p>
                <p>• No advance notice required for emergencies</p>
              </div>
            </div>

            <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
              <h4 class="font-bold mb-2">Maternity Leave</h4>
              <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Female employees are entitled to 12 weeks of paid maternity leave.</p>
              <div class="text-xs text-gray-500">
                <p>• Requires medical certification</p>
                <p>• Can be taken 4 weeks before due date</p>
                <p>• Additional 4 weeks unpaid leave available</p>
              </div>
            </div>

            <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
              <h4 class="font-bold mb-2">Unpaid Leave</h4>
              <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Employees may request unpaid leave for personal reasons.</p>
              <div class="text-xs text-gray-500">
                <p>• Maximum 30 days per year</p>
                <p>• Requires 4 weeks advance notice</p>
                <p>• Subject to operational requirements</p>
              </div>
            </div>
          </div>

          <div class="flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700">
            <button type="button" onclick="closeModal('leavePolicyModal')" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Leave Report Modal -->
  <div id="leaveReportModal" class="fixed inset-0 z-50 hidden">
    <div class="modal-backdrop fixed inset-0"></div>
    <div class="fixed inset-0 flex items-center justify-center p-4 custom-scrollbar">
      <div class="bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md">
        <div class="p-6 border-b border-gray-200 dark:border-gray-700">
          <div class="flex justify-between items-center">
            <h3 class="text-xl font-bold">Generate Leave Report</h3>
            <button onclick="closeModal('leaveReportModal')" class="text-gray-400 hover:text-gray-600">
              <span class="material-icons-round">close</span>
            </button>
          </div>
        </div>

        <div class="p-6">
          <form class="space-y-6">
            <div>
              <label class="block text-sm font-medium mb-2">Report Type</label>
              <select class="form-input">
                <option value="monthly">Monthly Leave Summary</option>
                <option value="quarterly">Quarterly Leave Analysis</option>
                <option value="annual">Annual Leave Report</option>
                <option value="department">Department-wise Leave</option>
                <option value="employee">Individual Employee Report</option>
              </select>
            </div>

            <div class="grid grid-cols-2 gap-6">
              <div>
                <label class="block text-sm font-medium mb-2">Start Date</label>
                <input type="date" class="form-input">
              </div>

              <div>
                <label class="block text-sm font-medium mb-2">End Date</label>
                <input type="date" class="form-input">
              </div>
            </div>

            <div>
              <label class="block text-sm font-medium mb-2">Department</label>
              <select class="form-input">
                <option value="all">All Departments</option>
                <option value="engineering">Engineering</option>
                <option value="sales">Sales</option>
                <option value="marketing">Marketing</option>
                <option value="operations">Operations</option>
              </select>
            </div>

            <div>
              <label class="block text-sm font-medium mb-2">Format</label>
              <div class="flex space-x-4">
                <label class="flex items-center space-x-2">
                  <input type="radio" name="format" value="pdf" checked class="text-primary-600">
                  <span>PDF</span>
                </label>
                <label class="flex items-center space-x-2">
                  <input type="radio" name="format" value="excel" class="text-primary-600">
                  <span>Excel</span>
                </label>
                <label class="flex items-center space-x-2">
                  <input type="radio" name="format" value="csv" class="text-primary-600">
                  <span>CSV</span>
                </label>
              </div>
            </div>

            <div class="flex justify-end space-x-3 pt-4">
              <button type="button" onclick="closeModal('leaveReportModal')" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">Cancel</button>
              <button type="submit" class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700">Generate Report</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Mobile Sidebar Toggle
    const menuToggle = document.getElementById('menuToggle');
    const mobileOverlay = document.getElementById('mobileOverlay');
    const sidebar = document.querySelector('.sidebar-container');

    menuToggle.addEventListener('click', () => {
        sidebar.classList.toggle('open');
        mobileOverlay.classList.toggle('hidden');
        document.body.style.overflow = sidebar.classList.contains('open') ? 'hidden' : 'auto';
    });

    mobileOverlay.addEventListener('click', () => {
        sidebar.classList.remove('open');
        mobileOverlay.classList.add('hidden');
        document.body.style.overflow = 'auto';
    });

    // Theme Toggle
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = themeToggle.querySelector('.material-icons-round');

    themeToggle.addEventListener('click', () => {
        const isDark = document.documentElement.classList.toggle('dark');
        themeIcon.textContent = isDark ? 'light_mode' : 'dark_mode';
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });

    // Initialize theme
    if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
        themeIcon.textContent = 'light_mode';
    }

    // Sidebar navigation active state
    document.querySelectorAll('.sidebar-item').forEach(item => {
        item.addEventListener('click', function(e) {
            if (this.getAttribute('href') === '#') {
                e.preventDefault();
            }

            // Remove active class from all items
            document.querySelectorAll('.sidebar-item').forEach(nav => {
                nav.classList.remove('active');
            });

            // Add active class to clicked item
            this.classList.add('active');

            // Close sidebar on mobile after clicking
            if (window.innerWidth < 1024) {
                sidebar.classList.remove('open');
                mobileOverlay.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }
        });
    });

    // Close sidebar on window resize
    window.addEventListener('resize', () => {
        if (window.innerWidth >= 1024) {
            sidebar.classList.remove('open');
            mobileOverlay.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }
    });

    // Modal functions
    function openModal(modalId) {
        document.getElementById(modalId).classList.remove('hidden');
        document.body.style.overflow = 'hidden';
    }

    function closeModal(modalId) {
        document.getElementById(modalId).classList.add('hidden');
        document.body.style.overflow = 'auto';
    }

    // Close modal on backdrop click
    document.querySelectorAll('.modal-backdrop').forEach(backdrop => {
        backdrop.addEventListener('click', function() {
            this.parentElement.classList.add('hidden');
            document.body.style.overflow = 'auto';
        });
    });

    // Calendar functionality
    let currentDate = new Date(2024, 0, 15); // January 15, 2024

    function updateCalendar() {
        const monthNames = ["January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"];
        document.getElementById('currentMonth').textContent =
            `${monthNames[currentDate.getMonth()]} ${currentDate.getFullYear()}`;
    }

    function prevMonth() {
        currentDate.setMonth(currentDate.getMonth() - 1);
        updateCalendar();
    }

    function nextMonth() {
        currentDate.setMonth(currentDate.getMonth() + 1);
        updateCalendar();
    }

    // Initialize calendar
    updateCalendar();

    // Leave approval functions
    function approveLeave(leaveId) {
        const row = document.querySelector(`[data-leave-id="${leaveId}"]`) ||
                   document.querySelectorAll('.hover\\:bg-gray-50')[leaveId - 1];

        if (!row) return;

        // Get payment type
        const paymentType = row.querySelector('input[name^="payment"]:checked')?.value || 'with';

        // Add loading state
        const approveBtn = row.querySelector('button:contains("Approve")');
        const originalText = approveBtn.textContent;
        approveBtn.textContent = 'Approving...';
        approveBtn.disabled = true;

        // Simulate API call
        setTimeout(() => {
            row.style.opacity = '0';
            row.style.transform = 'translateX(-20px)';

            setTimeout(() => {
                row.remove();

                // Update pending count
                const pendingCountElement = document.querySelector('.stat-card:nth-child(1) h3');
                if (pendingCountElement) {
                    const currentCount = parseInt(pendingCountElement.textContent);
                    if (!isNaN(currentCount) && currentCount > 0) {
                        pendingCountElement.textContent = (currentCount - 1).toString();
                    }
                }

                // Update approved count
                const approvedCountElement = document.querySelector('.stat-card:nth-child(3) h3');
                if (approvedCountElement) {
                    const currentCount = parseInt(approvedCountElement.textContent);
                    if (!isNaN(currentCount)) {
                        approvedCountElement.textContent = (currentCount + 1).toString();
                    }
                }

                // Show success message
                showToast(`Leave approved ${paymentType === 'with' ? 'with payment' : 'without payment'}`, 'success');
            }, 300);
        }, 1000);
    }

    function rejectLeave(leaveId) {
        const row = document.querySelector(`[data-leave-id="${leaveId}"]`) ||
                   document.querySelectorAll('.hover\\:bg-gray-50')[leaveId - 1];

        if (!row) return;

        // Add loading state
        const rejectBtn = row.querySelector('button:contains("Deny")');
        const originalText = rejectBtn.textContent;
        rejectBtn.textContent = 'Denying...';
        rejectBtn.disabled = true;

        // Simulate API call
        setTimeout(() => {
            row.style.opacity = '0';
            row.style.transform = 'translateX(20px)';

            setTimeout(() => {
                row.remove();

                // Update pending count
                const pendingCountElement = document.querySelector('.stat-card:nth-child(1) h3');
                if (pendingCountElement) {
                    const currentCount = parseInt(pendingCountElement.textContent);
                    if (!isNaN(currentCount) && currentCount > 0) {
                        pendingCountElement.textContent = (currentCount - 1).toString();
                    }
                }

                // Update rejected count
                const rejectedCountElement = document.querySelector('.stat-card:nth-child(4) h3');
                if (rejectedCountElement) {
                    const currentCount = parseInt(rejectedCountElement.textContent);
                    if (!isNaN(currentCount)) {
                        rejectedCountElement.textContent = (currentCount + 1).toString();
                    }
                }

                // Show success message
                showToast('Leave request rejected', 'error');
            }, 300);
        }, 1000);
    }

    function approveAllPending() {
        const pendingRows = document.querySelectorAll('.hover\\:bg-gray-50');
        if (pendingRows.length === 0) return;

        if (confirm(`Are you sure you want to approve all ${pendingRows.length} pending leave requests?`)) {
            pendingRows.forEach((row, index) => {
                setTimeout(() => {
                    row.style.opacity = '0';
                    row.style.transform = 'translateX(-20px)';

                    setTimeout(() => {
                        row.remove();

                        if (index === pendingRows.length - 1) {
                            // Update all counts
                            const pendingCountElement = document.querySelector('.stat-card:nth-child(1) h3');
                            const approvedCountElement = document.querySelector('.stat-card:nth-child(3) h3');

                            if (pendingCountElement) {
                                pendingCountElement.textContent = '0';
                            }
                            if (approvedCountElement) {
                                const currentCount = parseInt(approvedCountElement.textContent);
                                if (!isNaN(currentCount)) {
                                    approvedCountElement.textContent = (currentCount + pendingRows.length).toString();
                                }
                            }

                            showToast(`All ${pendingRows.length} leave requests approved`, 'success');
                        }
                    }, 300);
                }, index * 200);
            });
        }
    }

    function viewLeaveDetails(leaveId) {
        openModal('leaveDetailsModal');
    }

    function printLeaveDetails() {
        // In a real app, this would generate a printable version
        window.print();
    }

    // Toast notification
    function showToast(message, type = 'success') {
        const toast = document.createElement('div');
        toast.className = `fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 transform translate-x-full ${
            type === 'success' ? 'bg-green-500 text-white' :
            type === 'error' ? 'bg-red-500 text-white' :
            'bg-blue-500 text-white'
        }`;
        toast.textContent = message;
        document.body.appendChild(toast);

        setTimeout(() => {
            toast.classList.remove('translate-x-full');
        }, 100);

        setTimeout(() => {
            toast.classList.add('translate-x-full');
            setTimeout(() => {
                document.body.removeChild(toast);
            }, 300);
        }, 3000);
    }

    // Filter functionality
    document.getElementById('searchInput')?.addEventListener('input', function(e) {
        const searchTerm = e.target.value.toLowerCase();
        filterTable();
    });

    document.getElementById('statusFilter')?.addEventListener('change', filterTable);
    document.getElementById('typeFilter')?.addEventListener('change', filterTable);
    document.getElementById('dateFilter')?.addEventListener('change', filterTable);

    function filterTable() {
        const searchTerm = document.getElementById('searchInput')?.value.toLowerCase() || '';
        const status = document.getElementById('statusFilter')?.value;
        const type = document.getElementById('typeFilter')?.value;
        const date = document.getElementById('dateFilter')?.value;

        const rows = document.querySelectorAll('tbody tr');

        rows.forEach(row => {
            const employeeName = row.children[0]?.textContent.toLowerCase();
            const leaveType = row.children[1]?.textContent.toLowerCase();
            const leaveStatus = row.children[5]?.textContent.toLowerCase();
            const leaveDate = row.children[2]?.textContent;

            let show = true;

            // Search filter
            if (searchTerm && !employeeName.includes(searchTerm)) {
                show = false;
            }

            // Status filter
            if (status && !leaveStatus.includes(status)) {
                show = false;
            }

            // Type filter
            if (type && !leaveType.includes(type)) {
                show = false;
            }

            // Date filter (simplified)
            if (date && leaveDate) {
                const [start, end] = date.split('-');
                const year = start;
                const month = end;
                if (!leaveDate.includes(`${year}-${month}`)) {
                    show = false;
                }
            }

            row.style.display = show ? '' : 'none';
        });
    }

    // Initialize filters
    document.addEventListener('DOMContentLoaded', () => {
        filterTable();
    });

    // Set data attributes for leave rows
    document.querySelectorAll('.hover\\:bg-gray-50').forEach((row, index) => {
        row.setAttribute('data-leave-id', index + 1);
    });
  </script>
</main>
</body>
</html>