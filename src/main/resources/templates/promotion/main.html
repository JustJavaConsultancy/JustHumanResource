<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        },
                        secondary: {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e1',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                        }
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', '-apple-system', 'sans-serif'],
                    },
                    borderRadius: {
                        'xl': '1rem',
                        '2xl': '1.5rem',
                    }
                },
            },
        };
    </script>
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }

        body {
            overflow-x: hidden;
        }

        .sidebar-item {
            transition: all 0.2s ease;
            position: relative;
        }

        .sidebar-item.active {
            background-color: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
            border-left: 3px solid #3b82f6;
        }

        .sidebar-item.active .material-icons-round {
            color: #3b82f6;
        }

        .sidebar-item:hover:not(.active) {
            background-color: rgba(59, 130, 246, 0.05);
        }

        .dark .sidebar-item.active {
            background-color: rgba(59, 130, 246, 0.2);
        }

        .stat-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .badge {
            padding: 2px 8px;
            font-size: 0.75rem;
            font-weight: 500;
            border-radius: 9999px;
        }

        .badge-success {
            background-color: #dcfce7;
            color: #16a34a;
        }

        .badge-warning {
            background-color: #fef3c7;
            color: #d97706;
        }

        .badge-error {
            background-color: #fee2e2;
            color: #dc2626;
        }

        .badge-info {
            background-color: #dbeafe;
            color: #2563eb;
        }

        .badge-purple {
            background-color: #f3e8ff;
            color: #9333ea;
        }

        .progress-bar {
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            background-color: #e5e7eb;
        }

        .dark .progress-bar {
            background-color: #374151;
        }

        .progress-fill {
            height: 100%;
            border-radius: 4px;
        }

        .sidebar-scroll::-webkit-scrollbar {
            width: 4px;
        }

        .sidebar-scroll::-webkit-scrollbar-track {
            background: transparent;
        }

        .sidebar-scroll::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        .dark .sidebar-scroll::-webkit-scrollbar-thumb {
            background: #4b5563;
        }

        .transition-all {
            transition-property: all;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 200ms;
        }

        .sidebar-container {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: 16rem;
            z-index: 40;
            overflow-y: auto;
        }

        .main-content {
            margin-left: 16rem;
            width: calc(100% - 16rem);
            min-height: 100vh;
        }

        @media (max-width: 1023px) {
            .sidebar-container {
                transform: translateX(-100%);
            }

            .sidebar-container.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                width: 100%;
            }
        }

        /* Promotion Specific Styles */
        .promotion-tab {
            padding: 12px 20px;
            font-weight: 500;
            color: #6b7280;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
        }

        .promotion-tab:hover {
            color: #4b5563;
        }

        .promotion-tab.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
        }

        .dark .promotion-tab {
            color: #9ca3af;
        }

        .dark .promotion-tab:hover {
            color: #d1d5db;
        }

        .dark .promotion-tab.active {
            color: #3b82f6;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 12px;
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .dark .modal-content {
            background-color: #1f2937;
        }

        .status-pending { background-color: #fef3c7; color: #d97706; }
        .status-approved { background-color: #dcfce7; color: #16a34a; }
        .status-rejected { background-color: #fee2e2; color: #dc2626; }
        .status-in-review { background-color: #dbeafe; color: #2563eb; }
        .status-completed { background-color: #f3e8ff; color: #9333ea; }

        .grade-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.875rem;
        }

        .grade-5 { background-color: #dbeafe; color: #1e40af; }
        .grade-6 { background-color: #e0e7ff; color: #3730a3; }
        .grade-7 { background-color: #ede9fe; color: #5b21b6; }
        .grade-8 { background-color: #f3e8ff; color: #7e22ce; }
        .grade-9 { background-color: #fae8ff; color: #a21caf; }

        .level-badge {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            background-color: #f1f5f9;
            color: #475569;
        }

        .dark .level-badge {
            background-color: #334155;
            color: #cbd5e1;
        }

        .salary-change-positive {
            color: #16a34a;
            background-color: #dcfce7;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.875rem;
        }

        .salary-change-negative {
            color: #dc2626;
            background-color: #fee2e2;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.875rem;
        }
    </style>
</head>
<body>
<main layout:fragment="content">
    <!-- Stats Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8">
        <!-- Pending Approvals -->
        <div class="stat-card bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 md:p-6">
            <div class="flex items-center justify-between mb-4">
                <div class="p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg">
                    <span class="material-icons-round text-yellow-600 dark:text-yellow-400">pending_actions</span>
                </div>
                <span class="badge badge-warning">Requires Action</span>
            </div>
            <h3 class="text-2xl font-bold mb-1" id="pendingCount">8</h3>
            <p class="text-gray-600 dark:text-gray-400 text-sm">Pending Approvals</p>
            <div class="mt-3 flex items-center text-xs text-gray-500">
                <span class="material-icons-round text-xs mr-1">schedule</span>
                <span>3 urgent, 5 this week</span>
            </div>
        </div>

        <!-- Approved This Month -->
        <div class="stat-card bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 md:p-6">
            <div class="flex items-center justify-between mb-4">
                <div class="p-3 bg-green-100 dark:bg-green-900/30 rounded-lg">
                    <span class="material-icons-round text-green-600 dark:text-green-400">check_circle</span>
                </div>
                <span class="text-sm font-medium text-green-600 flex items-center">
                            <span class="material-icons-round text-sm mr-1">trending_up</span>
                            +25%
                        </span>
            </div>
            <h3 class="text-2xl font-bold mb-1" id="approvedCount">24</h3>
            <p class="text-gray-600 dark:text-gray-400 text-sm">Approved This Month</p>
            <div class="mt-3">
                <div class="progress-bar">
                    <div class="progress-fill bg-green-500" style="width: 80%"></div>
                </div>
                <p class="text-xs text-gray-500 mt-1">80% approval rate</p>
            </div>
        </div>

        <!-- Average Appraisal Score -->
        <div class="stat-card bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 md:p-6">
            <div class="flex items-center justify-between mb-4">
                <div class="p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg">
                    <span class="material-icons-round text-blue-600 dark:text-blue-400">star</span>
                </div>
                <span class="text-sm text-gray-500">Avg. Score</span>
            </div>
            <h3 class="text-2xl font-bold mb-1">86.4</h3>
            <p class="text-gray-600 dark:text-gray-400 text-sm">Average Appraisal Score</p>
            <div class="mt-3">
                <div class="flex items-center text-xs text-gray-500">
                    <span class="material-icons-round text-xs mr-1">show_chart</span>
                    <span>+3.2 from last quarter</span>
                </div>
            </div>
        </div>

        <!-- Salary Impact -->
        <div class="stat-card bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 md:p-6">
            <div class="flex items-center justify-between mb-4">
                <div class="p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg">
                    <span class="material-icons-round text-purple-600 dark:text-purple-400">attach_money</span>
                </div>
                <span class="badge badge-purple">Financial</span>
            </div>
            <h3 class="text-2xl font-bold mb-1">$124,500</h3>
            <p class="text-gray-600 dark:text-gray-400 text-sm">Monthly Salary Impact</p>
            <div class="mt-3">
                <div class="flex items-center text-xs text-gray-500">
                    <span class="material-icons-round text-xs mr-1">account_balance</span>
                    <span>Annual: $1.49M</span>
                </div>
            </div>
        </div>
    </div>

    <div style="display:flex;justify-content:end;margin-bottom:20px">
        <!-- New Promotion Button -->
        <button onclick="openModal('newPromotionModal')" class="bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 flex items-center space-x-2">
            <span class="material-icons-round text-sm">add</span>
            <span>New Promotion</span>
        </button>
    </div>
    <!-- Tabs -->
    <div class="border-b border-gray-200 dark:border-gray-700 mb-6">
        <nav class="flex space-x-6">
            <button id="tab-pending" class="promotion-tab active" onclick="switchTab('pending')">
                Pending Approvals
            </button>
            <button id="tab-approved" class="promotion-tab" onclick="switchTab('approved')">
                Approved Promotions
            </button>
            <button id="tab-all" class="promotion-tab" onclick="switchTab('all')">
                All Requests
            </button>
            <button id="tab-reports" class="promotion-tab" onclick="switchTab('reports')">
                Promotion Reports
            </button>
        </nav>
    </div>

    <!-- Pending Approvals Content -->
    <div id="content-pending" class="tab-content">
        <!-- Required Actions -->
        <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 mb-6">
            <div class="p-4 md:p-6 border-b border-gray-200 dark:border-gray-700">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <span class="material-icons-round text-primary-600">task_alt</span>
                        <h3 class="text-lg font-bold">Required Actions</h3>
                    </div>
                    <span class="text-sm text-gray-500">Urgent attention required</span>
                </div>
            </div>

            <div id="pendingActionsList">
                <!-- Data will be populated by JavaScript -->
            </div>
        </div>

        <!-- All Pending Requests -->
        <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700">
            <div class="p-4 md:p-6 border-b border-gray-200 dark:border-gray-700">
                <div class="flex items-center justify-between">
                    <h3 class="text-lg font-bold">All Pending Promotion Requests</h3>
                    <div class="flex items-center space-x-3">
                        <button class="p-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
                            <span class="material-icons-round text-sm">filter_list</span>
                        </button>
                        <button class="p-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
                            <span class="material-icons-round text-sm">download</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-50 dark:bg-gray-750">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Employee</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Current Position</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Proposed Position</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Appraisal Score</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Requested On</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Status</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Actions</th>
                    </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200 dark:divide-gray-700" id="pendingTable">
                    <!-- Data will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Approved Promotions Content -->
    <div id="content-approved" class="tab-content hidden">
        <!-- Recent Approved Promotions -->
        <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 mb-6">
            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                <h3 class="text-lg font-bold">Recently Approved Promotions</h3>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-50 dark:bg-gray-750">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Employee</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Previous Position</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">New Position</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Effective Date</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Salary Change</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Approved By</th>
                    </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200 dark:divide-gray-700" id="approvedTable">
                    <!-- Data will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Approval Trends -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6">
                <h3 class="text-lg font-bold mb-6">Promotion Approval Trends</h3>
                <div class="space-y-4">
                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <span>This Month</span>
                            <span class="font-medium">24 approvals</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill bg-green-500" style="width: 80%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <span>Last Month</span>
                            <span class="font-medium">19 approvals</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill bg-blue-500" style="width: 63%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <span>Quarter-to-Date</span>
                            <span class="font-medium">67 approvals</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill bg-purple-500" style="width: 89%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6">
                <h3 class="text-lg font-bold mb-6">Department-wise Promotions</h3>
                <div class="space-y-4">
                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <span>Engineering</span>
                            <span class="font-medium">28 promotions</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill bg-blue-500" style="width: 35%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <span>Sales</span>
                            <span class="font-medium">22 promotions</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill bg-green-500" style="width: 28%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <span>Marketing</span>
                            <span class="font-medium">15 promotions</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill bg-purple-500" style="width: 19%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <span>Operations</span>
                            <span class="font-medium">13 promotions</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill bg-yellow-500" style="width: 16%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- All Requests Content -->
    <div id="content-all" class="tab-content hidden">
        <div class="mb-6">
            <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <input type="text" placeholder="Search promotions..."
                               class="pl-10 pr-4 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-lg focus:ring-2 focus:ring-primary-500 focus:outline-none w-64">
                        <span class="material-icons-round text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2">search</span>
                    </div>
                    <select class="px-3 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-lg focus:ring-2 focus:ring-primary-500 focus:outline-none">
                        <option value="">All Status</option>
                        <option value="PENDING">Pending</option>
                        <option value="APPROVED">Approved</option>
                        <option value="REJECTED">Rejected</option>
                        <option value="IN_REVIEW">In Review</option>
                    </select>
                </div>
                <div class="flex items-center space-x-3">
                    <button class="p-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
                        <span class="material-icons-round text-sm">filter_list</span>
                    </button>
                    <button class="p-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
                        <span class="material-icons-round text-sm">download</span>
                    </button>
                    <button class="p-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
                        <span class="material-icons-round text-sm">print</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- All Requests Table -->
        <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700">
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-50 dark:bg-gray-750">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Request ID</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Employee</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Current Role</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Proposed Role</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Appraisal Score</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Status</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Requested</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Actions</th>
                    </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200 dark:divide-gray-700" id="allRequestsTable">
                    <!-- Data will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <div class="p-4 md:p-6 border-t border-gray-200 dark:border-gray-700">
                <div class="flex items-center justify-between">
                    <div class="text-sm text-gray-500">
                        Showing <span class="font-medium">1</span> to <span class="font-medium">10</span> of <span class="font-medium">48</span> requests
                    </div>
                    <div class="flex items-center space-x-2">
                        <button class="p-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 disabled:opacity-50" disabled>
                            <span class="material-icons-round text-sm">chevron_left</span>
                        </button>
                        <button class="px-3 py-1 bg-primary-600 text-white rounded-lg text-sm">1</button>
                        <button class="px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg text-sm hover:bg-gray-50 dark:hover:bg-gray-700">2</button>
                        <button class="px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg text-sm hover:bg-gray-50 dark:hover:bg-gray-700">3</button>
                        <button class="px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg text-sm hover:bg-gray-50 dark:hover:bg-gray-700">4</button>
                        <button class="p-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
                            <span class="material-icons-round text-sm">chevron_right</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Reports Content -->
    <div id="content-reports" class="tab-content hidden">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
            <!-- Promotion Statistics -->
            <div class="lg:col-span-2 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6">
                <h3 class="text-lg font-bold mb-6">Promotion Statistics</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="p-4 border border-gray-200 dark:border-gray-700 rounded-lg">
                        <div class="text-2xl font-bold mb-1">48</div>
                        <div class="text-sm text-gray-500">Total Requests</div>
                    </div>
                    <div class="p-4 border border-gray-200 dark:border-gray-700 rounded-lg">
                        <div class="text-2xl font-bold mb-1">80%</div>
                        <div class="text-sm text-gray-500">Approval Rate</div>
                    </div>
                    <div class="p-4 border border-gray-200 dark:border-gray-700 rounded-lg">
                        <div class="text-2xl font-bold mb-1">24</div>
                        <div class="text-sm text-gray-500">This Month</div>
                    </div>
                    <div class="p-4 border border-gray-200 dark:border-gray-700 rounded-lg">
                        <div class="text-2xl font-bold mb-1">15.2</div>
                        <div class="text-sm text-gray-500">Avg. Days to Approve</div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6">
                <h3 class="text-lg font-bold mb-6">Quick Actions</h3>
                <div class="space-y-3">
                    <button onclick="openModal('generateReportModal')" class="w-full flex items-center justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                        <div class="flex items-center space-x-3">
                            <span class="material-icons-round text-blue-600">description</span>
                            <span>Generate Report</span>
                        </div>
                        <span class="material-icons-round text-gray-400">chevron_right</span>
                    </button>
                    <button class="w-full flex items-center justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                        <div class="flex items-center space-x-3">
                            <span class="material-icons-round text-green-600">trending_up</span>
                            <span>View Trends</span>
                        </div>
                        <span class="material-icons-round text-gray-400">chevron_right</span>
                    </button>
                    <button class="w-full flex items-center justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                        <div class="flex items-center space-x-3">
                            <span class="material-icons-round text-purple-600">insights</span>
                            <span>Analytics</span>
                        </div>
                        <span class="material-icons-round text-gray-400">chevron_right</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Monthly Promotion Trends -->
        <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6">
            <h3 class="text-lg font-bold mb-6">Monthly Promotion Trends</h3>
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-50 dark:bg-gray-750">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Month</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Requests</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Approved</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Rejected</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Approval Rate</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Avg. Score</th>
                    </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                    <tr>
                        <td class="px-6 py-4">January 2024</td>
                        <td class="px-6 py-4">24</td>
                        <td class="px-6 py-4">19</td>
                        <td class="px-6 py-4">5</td>
                        <td class="px-6 py-4">
                            <div class="flex items-center">
                                <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                    <div class="h-2 rounded-full bg-green-500" style="width: 79%"></div>
                                </div>
                                <span>79%</span>
                            </div>
                        </td>
                        <td class="px-6 py-4">85.2</td>
                    </tr>
                    <tr>
                        <td class="px-6 py-4">December 2023</td>
                        <td class="px-6 py-4">19</td>
                        <td class="px-6 py-4">15</td>
                        <td class="px-6 py-4">4</td>
                        <td class="px-6 py-4">
                            <div class="flex items-center">
                                <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                    <div class="h-2 rounded-full bg-green-500" style="width: 79%"></div>
                                </div>
                                <span>79%</span>
                            </div>
                        </td>
                        <td class="px-6 py-4">83.7</td>
                    </tr>
                    <tr>
                        <td class="px-6 py-4">November 2023</td>
                        <td class="px-6 py-4">22</td>
                        <td class="px-6 py-4">18</td>
                        <td class="px-6 py-4">4</td>
                        <td class="px-6 py-4">
                            <div class="flex items-center">
                                <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                    <div class="h-2 rounded-full bg-green-500" style="width: 82%"></div>
                                </div>
                                <span>82%</span>
                            </div>
                        </td>
                        <td class="px-6 py-4">84.5</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- New Promotion Modal -->
    <div id="newPromotionModal" class="modal">
        <div class="modal-content">
            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                <h3 class="text-lg font-bold">Create New Promotion Request</h3>
            </div>
            <form id="promotionForm" class="p-6 space-y-4">
                <input type="hidden" id="promotionId">
                <input type="hidden" id="processInstanceId">

                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Employee *</label>
                    <select id="promotionEmployee" required
                            class="w-full px-3 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-lg focus:ring-2 focus:ring-primary-500 focus:outline-none">
                        <option value="">Select Employee</option>
                    </select>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Current Role *</label>
                        <select id="currentRole" required
                                class="w-full px-3 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-lg focus:ring-2 focus:ring-primary-500 focus:outline-none">
                            <option value="">Select Current Role</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Proposed Role *</label>
                        <select id="proposedRole" required
                                class="w-full px-3 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-lg focus:ring-2 focus:ring-primary-500 focus:outline-none">
                            <option value="">Select Proposed Role</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Appraisal Score *</label>
                    <input type="number" min="0" max="100" step="0.1" id="appraisalScore" required
                           class="w-full px-3 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-lg focus:ring-2 focus:ring-primary-500 focus:outline-none"
                           placeholder="Enter score (0-100)">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Effective Date *</label>
                    <input type="date" id="effectiveDate" required
                           class="w-full px-3 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-lg focus:ring-2 focus:ring-primary-500 focus:outline-none">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Justification *</label>
                    <textarea id="justification" rows="4" required
                              class="w-full px-3 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-lg focus:ring-2 focus:ring-primary-500 focus:outline-none"
                              placeholder="Provide detailed justification for this promotion..."></textarea>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Status</label>
                    <select id="promotionStatus"
                            class="w-full px-3 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-lg focus:ring-2 focus:ring-primary-500 focus:outline-none">
                        <option value="PENDING">Pending</option>
                        <option value="IN_REVIEW">In Review</option>
                        <option value="APPROVED">Approved</option>
                        <option value="REJECTED">Rejected</option>
                    </select>
                </div>
            </form>
            <div class="p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3">
                <button onclick="closeModal('newPromotionModal')" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                    Cancel
                </button>
                <button onclick="savePromotionRequest()" class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700">
                    Submit Promotion Request
                </button>
            </div>
        </div>
    </div>

    <!-- View Promotion Details Modal -->
    <div id="viewPromotionModal" class="modal">
        <div class="modal-content">
            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                <h3 class="text-lg font-bold">Promotion Request Details</h3>
            </div>
            <div class="p-6 space-y-6">
                <!-- Header Info -->
                <div class="flex items-center justify-between">
                    <div>
                        <h4 class="font-bold text-lg" id="detailEmployeeName"></h4>
                        <p class="text-sm text-gray-500" id="detailRequestId"></p>
                    </div>
                    <span id="detailStatusBadge" class="px-3 py-1 text-xs rounded-full"></span>
                </div>

                <!-- Role Comparison -->
                <div class="grid grid-cols-2 gap-6">
                    <div class="p-4 border border-gray-200 dark:border-gray-700 rounded-lg">
                        <h5 class="text-sm font-medium text-gray-500 mb-3">Current Role</h5>
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Position:</span>
                                <span class="font-medium" id="detailCurrentRole"></span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Grade:</span>
                                <span id="detailCurrentGrade" class="grade-badge"></span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Level:</span>
                                <span id="detailCurrentLevel" class="level-badge"></span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Salary:</span>
                                <span class="font-medium" id="detailCurrentSalary"></span>
                            </div>
                        </div>
                    </div>

                    <div class="p-4 border border-gray-200 dark:border-gray-700 rounded-lg">
                        <h5 class="text-sm font-medium text-gray-500 mb-3">Proposed Role</h5>
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Position:</span>
                                <span class="font-medium" id="detailProposedRole"></span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Grade:</span>
                                <span id="detailProposedGrade" class="grade-badge"></span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Level:</span>
                                <span id="detailProposedLevel" class="level-badge"></span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Salary:</span>
                                <span class="font-medium" id="detailProposedSalary"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Salary Change -->
                <div class="p-4 border border-gray-200 dark:border-gray-700 rounded-lg">
                    <div class="flex items-center justify-between mb-3">
                        <h5 class="text-sm font-medium text-gray-500">Salary Change</h5>
                        <span id="detailSalaryChange" class="salary-change-positive"></span>
                    </div>
                    <div class="progress-bar">
                        <div id="detailSalaryProgress" class="progress-fill bg-green-500" style="width: 15.6%"></div>
                    </div>
                    <p class="text-xs text-gray-500 mt-2">+15.6% increase from current salary</p>
                </div>

                <!-- Additional Details -->
                <div class="space-y-4">
                    <div>
                        <h5 class="text-sm font-medium text-gray-500 mb-2">Justification</h5>
                        <p id="detailJustification" class="text-sm bg-gray-50 dark:bg-gray-800 p-3 rounded-lg"></p>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <h5 class="text-sm font-medium text-gray-500 mb-2">Appraisal Score</h5>
                            <div class="flex items-center">
                                <div class="w-24 bg-gray-200 rounded-full h-2 mr-2">
                                    <div id="detailScoreBar" class="h-2 rounded-full" style="width: 85%"></div>
                                </div>
                                <span id="detailAppraisalScore" class="font-medium">85/100</span>
                            </div>
                        </div>
                        <div>
                            <h5 class="text-sm font-medium text-gray-500 mb-2">Effective Date</h5>
                            <p id="detailEffectiveDate" class="font-medium">February 1, 2024</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <h5 class="text-sm font-medium text-gray-500 mb-2">Requested On</h5>
                            <p id="detailRequestedAt" class="text-sm">January 15, 2024</p>
                        </div>
                        <div>
                            <h5 class="text-sm font-medium text-gray-500 mb-2">Approved On</h5>
                            <p id="detailApprovedAt" class="text-sm">January 25, 2024</p>
                        </div>
                    </div>
                </div>

                <!-- Timeline -->
                <div>
                    <h5 class="text-sm font-medium text-gray-500 mb-3">Promotion Timeline</h5>
                    <div class="space-y-3">
                        <div class="flex items-center">
                            <div class="w-2 h-2 bg-green-500 rounded-full mr-3"></div>
                            <div class="flex-1">
                                <p class="text-sm font-medium">Request Submitted</p>
                                <p class="text-xs text-gray-500" id="timelineRequested"></p>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <div class="w-2 h-2 bg-blue-500 rounded-full mr-3"></div>
                            <div class="flex-1">
                                <p class="text-sm font-medium">Under Review</p>
                                <p class="text-xs text-gray-500" id="timelineReviewed"></p>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <div class="w-2 h-2 bg-purple-500 rounded-full mr-3"></div>
                            <div class="flex-1">
                                <p class="text-sm font-medium">Approval Decision</p>
                                <p class="text-xs text-gray-500" id="timelineApproved"></p>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <div class="w-2 h-2 bg-gray-300 rounded-full mr-3"></div>
                            <div class="flex-1">
                                <p class="text-sm font-medium text-gray-400">Effective Date</p>
                                <p class="text-xs text-gray-500" id="timelineEffective"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3">
                <button onclick="closeModal('viewPromotionModal')" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                    Close
                </button>
                <div id="actionButtons">
                    <!-- Buttons will be dynamically added based on status -->
                </div>
            </div>
        </div>
    </div>

    <!-- Generate Report Modal -->
    <div id="generateReportModal" class="modal">
        <div class="modal-content">
            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                <h3 class="text-lg font-bold">Generate Promotion Report</h3>
            </div>
            <form class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Report Type</label>
                    <select class="w-full px-3 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-lg focus:ring-2 focus:ring-primary-500 focus:outline-none">
                        <option value="">Select Report Type</option>
                        <option value="MONTHLY">Monthly Promotion Report</option>
                        <option value="QUARTERLY">Quarterly Promotion Report</option>
                        <option value="YEARLY">Annual Promotion Report</option>
                        <option value="DEPARTMENT">Department-wise Report</option>
                        <option value="GRADE">Grade-wise Analysis</option>
                    </select>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Start Date</label>
                        <input type="date" class="w-full px-3 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-lg focus:ring-2 focus:ring-primary-500 focus:outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">End Date</label>
                        <input type="date" class="w-full px-3 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-lg focus:ring-2 focus:ring-primary-500 focus:outline-none">
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Format</label>
                    <div class="flex space-x-4">
                        <label class="flex items-center">
                            <input type="radio" name="format" value="PDF" class="text-primary-600" checked>
                            <span class="ml-2 text-sm">PDF</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="format" value="EXCEL" class="text-primary-600">
                            <span class="ml-2 text-sm">Excel</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="format" value="CSV" class="text-primary-600">
                            <span class="ml-2 text-sm">CSV</span>
                        </label>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Include Data</label>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="checkbox" class="text-primary-600 rounded" checked>
                            <span class="ml-2 text-sm">Employee Details</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="text-primary-600 rounded" checked>
                            <span class="ml-2 text-sm">Salary Changes</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="text-primary-600 rounded">
                            <span class="ml-2 text-sm">Performance Scores</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="text-primary-600 rounded" checked>
                            <span class="ml-2 text-sm">Timeline Data</span>
                        </label>
                    </div>
                </div>
            </form>
            <div class="p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3">
                <button onclick="closeModal('generateReportModal')" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700">
                    Cancel
                </button>
                <button class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700">
                    Generate Report
                </button>
            </div>
        </div>
    </div>

    <script>
        // Sample Data matching PromotionRequest entity
        let promotionRequests = [
            {
                id: 1,
                processInstanceId: "PR-2024-001",
                employee: { id: 1, name: "Mike Ross", department: "Engineering", currentSalary: 4500 },
                currentRole: { id: 1, name: "Senior Software Engineer", grade: 5, level: 3 },
                proposedRole: { id: 2, name: "Lead Software Engineer", grade: 6, level: 1 },
                justification: "Exceptional performance in leading the migration project. Consistently exceeds expectations and demonstrates strong leadership qualities. Has mentored 3 junior developers.",
                appraisalScore: 92.5,
                status: "PENDING",
                effectiveDate: "2024-02-01",
                requestedAt: "2024-01-15T10:30:00",
                approvedAt: null
            },
            {
                id: 2,
                processInstanceId: "PR-2024-002",
                employee: { id: 2, name: "Sarah Johnson", department: "Sales", currentSalary: 5200 },
                currentRole: { id: 3, name: "Sales Manager", grade: 6, level: 2 },
                proposedRole: { id: 4, name: "Senior Sales Manager", grade: 7, level: 1 },
                justification: "Achieved 150% of sales target for 3 consecutive quarters. Developed new sales strategy that increased team performance by 30%.",
                appraisalScore: 88.0,
                status: "IN_REVIEW",
                effectiveDate: "2024-02-15",
                requestedAt: "2024-01-18T14:20:00",
                approvedAt: null
            },
            {
                id: 3,
                processInstanceId: "PR-2024-003",
                employee: { id: 3, name: "David Chen", department: "Product", currentSalary: 5800 },
                currentRole: { id: 5, name: "Product Manager", grade: 7, level: 1 },
                proposedRole: { id: 6, name: "Senior Product Manager", grade: 8, level: 1 },
                justification: "Successfully launched Product X which achieved $2M in revenue in first quarter. Strong cross-functional leadership and strategic thinking.",
                appraisalScore: 94.5,
                status: "APPROVED",
                effectiveDate: "2024-01-20",
                requestedAt: "2024-01-10T09:15:00",
                approvedAt: "2024-01-18T16:45:00"
            },
            {
                id: 4,
                processInstanceId: "PR-2024-004",
                employee: { id: 4, name: "Lisa Wang", department: "Marketing", currentSalary: 4200 },
                currentRole: { id: 7, name: "Marketing Specialist", grade: 5, level: 2 },
                proposedRole: { id: 8, name: "Marketing Manager", grade: 6, level: 1 },
                justification: "Led successful campaign that increased brand awareness by 40%. Excellent project management and creative skills.",
                appraisalScore: 86.0,
                status: "REJECTED",
                effectiveDate: "2024-02-01",
                requestedAt: "2024-01-12T11:45:00",
                approvedAt: "2024-01-20T10:30:00"
            },
            {
                id: 5,
                processInstanceId: "PR-2024-005",
                employee: { id: 5, name: "James Wilson", department: "Operations", currentSalary: 3900 },
                currentRole: { id: 9, name: "Operations Analyst", grade: 4, level: 3 },
                proposedRole: { id: 10, name: "Senior Operations Analyst", grade: 5, level: 1 },
                justification: "Implemented process improvements that reduced operational costs by 15%. Consistently high performance scores.",
                appraisalScore: 89.5,
                status: "PENDING",
                effectiveDate: "2024-03-01",
                requestedAt: "2024-01-20T13:30:00",
                approvedAt: null
            }
        ];

        let employees = [
            { id: 1, name: "Mike Ross", department: "Engineering", currentSalary: 4500, jobRole: "Senior Software Engineer" },
            { id: 2, name: "Sarah Johnson", department: "Sales", currentSalary: 5200, jobRole: "Sales Manager" },
            { id: 3, name: "David Chen", department: "Product", currentSalary: 5800, jobRole: "Product Manager" },
            { id: 4, name: "Lisa Wang", department: "Marketing", currentSalary: 4200, jobRole: "Marketing Specialist" },
            { id: 5, name: "James Wilson", department: "Operations", currentSalary: 3900, jobRole: "Operations Analyst" },
            { id: 6, name: "Emma Thompson", department: "HR", currentSalary: 4700, jobRole: "HR Business Partner" },
            { id: 7, name: "Robert Brown", department: "Finance", currentSalary: 5500, jobRole: "Financial Analyst" }
        ];

        let jobRoles = [
            { id: 1, name: "Senior Software Engineer", grade: 5, level: 3, salaryRange: "4500-5500" },
            { id: 2, name: "Lead Software Engineer", grade: 6, level: 1, salaryRange: "5500-6500" },
            { id: 3, name: "Sales Manager", grade: 6, level: 2, salaryRange: "5200-6200" },
            { id: 4, name: "Senior Sales Manager", grade: 7, level: 1, salaryRange: "6200-7500" },
            { id: 5, name: "Product Manager", grade: 7, level: 1, salaryRange: "5800-6800" },
            { id: 6, name: "Senior Product Manager", grade: 8, level: 1, salaryRange: "6800-8000" },
            { id: 7, name: "Marketing Specialist", grade: 5, level: 2, salaryRange: "4200-5000" },
            { id: 8, name: "Marketing Manager", grade: 6, level: 1, salaryRange: "5000-6000" },
            { id: 9, name: "Operations Analyst", grade: 4, level: 3, salaryRange: "3900-4700" },
            { id: 10, name: "Senior Operations Analyst", grade: 5, level: 1, salaryRange: "4700-5500" }
        ];

        // Tab Management
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });

            document.querySelectorAll('.promotion-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            document.getElementById(`content-${tabName}`).classList.remove('hidden');
            document.getElementById(`tab-${tabName}`).classList.add('active');

            if (tabName === 'pending') {
                loadPendingApprovals();
            } else if (tabName === 'approved') {
                loadApprovedPromotions();
            } else if (tabName === 'all') {
                loadAllRequests();
            }
        }

        // Modal Management
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
            document.body.style.overflow = 'hidden';

            if (modalId === 'newPromotionModal') {
                resetPromotionForm();
                loadEmployeeOptions();
                loadRoleOptions();
            }
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Load pending approvals
        function loadPendingApprovals() {
            const pendingTable = document.getElementById('pendingTable');
            const pendingActionsList = document.getElementById('pendingActionsList');

            pendingTable.innerHTML = '';
            pendingActionsList.innerHTML = '';

            const pendingRequests = promotionRequests.filter(req =>
                req.status === 'PENDING' || req.status === 'IN_REVIEW'
            );

            // Update stats
            document.getElementById('pendingCount').textContent = pendingRequests.length;

            // Load urgent actions
            const urgentRequests = pendingRequests.slice(0, 3);
            urgentRequests.forEach(request => {
                const actionDiv = document.createElement('div');
                actionDiv.className = 'p-4 md:p-6 hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors';
                actionDiv.innerHTML = `
                    <div class="flex flex-col md:flex-row md:items-center justify-between mb-4 gap-2">
                        <div class="flex items-center space-x-4">
                            <div class="w-10 h-10 md:w-12 md:h-12 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-bold">
                                ${request.employee.name.charAt(0)}
                            </div>
                            <div>
                                <p class="font-medium">${request.employee.name}</p>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Promotion Request • ${request.currentRole.name} to ${request.proposedRole.name}</p>
                            </div>
                        </div>
                        <span class="text-sm ${request.status === 'PENDING' ? 'text-yellow-600' : 'text-blue-600'}">
                            ${request.status === 'PENDING' ? 'Pending' : 'In Review'}
                        </span>
                    </div>
                    <div class="flex flex-col md:flex-row md:items-center justify-between gap-3">
                        <div class="flex-1">
                            <p class="text-sm text-gray-600 dark:text-gray-400">Current: Grade ${request.currentRole.grade} • Level ${request.currentRole.level} → Proposed: Grade ${request.proposedRole.grade} • Level ${request.proposedRole.level}</p>
                            <p class="text-xs text-gray-500 mt-1">Appraisal Score: ${request.appraisalScore}/100</p>
                        </div>
                        <div class="flex space-x-3 mt-3 md:mt-0">
                            <button onclick="viewPromotionDetails(${request.id})" class="px-3 md:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700">
                                Review
                            </button>
                            <button onclick="approvePromotion(${request.id})" class="px-3 md:px-4 py-2 bg-primary-600 text-white rounded-lg text-sm font-medium hover:bg-primary-700">
                                Process
                            </button>
                        </div>
                    </div>
                `;
                pendingActionsList.appendChild(actionDiv);
            });

            // Load all pending table
            pendingRequests.forEach(request => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-bold">
                                ${request.employee.name.charAt(0)}
                            </div>
                            <div>
                                <p class="font-medium">${request.employee.name}</p>
                                <p class="text-sm text-gray-500 dark:text-gray-400">${request.employee.department}</p>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="text-sm font-medium">${request.currentRole.name}</span>
                        <div class="flex items-center space-x-2 mt-1">
                            <span class="grade-badge grade-${request.currentRole.grade}">Grade ${request.currentRole.grade}</span>
                            <span class="level-badge">Level ${request.currentRole.level}</span>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="text-sm font-medium">${request.proposedRole.name}</span>
                        <div class="flex items-center space-x-2 mt-1">
                            <span class="grade-badge grade-${request.proposedRole.grade}">Grade ${request.proposedRole.grade}</span>
                            <span class="level-badge">Level ${request.proposedRole.level}</span>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="flex items-center">
                            <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                <div class="h-2 rounded-full ${getScoreClass(request.appraisalScore)}"
                                     style="width: ${request.appraisalScore}%"></div>
                            </div>
                            <span>${request.appraisalScore}</span>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="text-sm text-gray-500">${formatDate(request.requestedAt)}</span>
                    </td>
                    <td class="px-6 py-4">
                        <span class="px-2 py-1 text-xs rounded-full status-${request.status.toLowerCase()}">
                            ${getStatusLabel(request.status)}
                        </span>
                    </td>
                    <td class="px-6 py-4">
                        <div class="flex space-x-2">
                            <button onclick="viewPromotionDetails(${request.id})" class="text-primary-600 hover:text-primary-900">
                                <span class="material-icons-round text-sm">visibility</span>
                            </button>
                            <button onclick="approvePromotion(${request.id})" class="text-green-600 hover:text-green-900">
                                <span class="material-icons-round text-sm">check</span>
                            </button>
                            <button onclick="rejectPromotion(${request.id})" class="text-red-600 hover:text-red-900">
                                <span class="material-icons-round text-sm">close</span>
                            </button>
                        </div>
                    </td>
                `;
                pendingTable.appendChild(row);
            });
        }

        // Load approved promotions
        function loadApprovedPromotions() {
            const approvedTable = document.getElementById('approvedTable');
            approvedTable.innerHTML = '';

            const approvedRequests = promotionRequests.filter(req => req.status === 'APPROVED');

            // Update stats
            document.getElementById('approvedCount').textContent = approvedRequests.length;

            approvedRequests.forEach(request => {
                const row = document.createElement('tr');
                const salaryChange = calculateSalaryChange(request);

                row.innerHTML = `
                    <td class="px-6 py-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-green-100 text-green-600 rounded-full flex items-center justify-center font-bold">
                                ${request.employee.name.charAt(0)}
                            </div>
                            <div>
                                <p class="font-medium">${request.employee.name}</p>
                                <p class="text-sm text-gray-500 dark:text-gray-400">${request.employee.department}</p>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="text-sm">${request.currentRole.name}</span>
                        <div class="flex items-center space-x-2 mt-1">
                            <span class="grade-badge grade-${request.currentRole.grade}">G${request.currentRole.grade}</span>
                            <span class="level-badge">L${request.currentRole.level}</span>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="text-sm font-medium">${request.proposedRole.name}</span>
                        <div class="flex items-center space-x-2 mt-1">
                            <span class="grade-badge grade-${request.proposedRole.grade}">G${request.proposedRole.grade}</span>
                            <span class="level-badge">L${request.proposedRole.level}</span>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="text-sm">${formatDate(request.effectiveDate)}</span>
                    </td>
                    <td class="px-6 py-4">
                        <span class="${salaryChange >= 0 ? 'salary-change-positive' : 'salary-change-negative'}">
                            ${salaryChange >= 0 ? '+' : ''}${salaryChange}%
                        </span>
                    </td>
                    <td class="px-6 py-4">
                        <span class="text-sm">Alex Morgan</span>
                    </td>
                `;
                approvedTable.appendChild(row);
            });
        }

        // Load all requests
        function loadAllRequests() {
            const allTable = document.getElementById('allRequestsTable');
            allTable.innerHTML = '';

            promotionRequests.forEach(request => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4">
                        <span class="font-mono text-sm">${request.processInstanceId}</span>
                    </td>
                    <td class="px-6 py-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 ${getStatusColor(request.status)} text-white rounded-full flex items-center justify-center font-bold text-xs">
                                ${request.employee.name.charAt(0)}
                            </div>
                            <div>
                                <p class="font-medium">${request.employee.name}</p>
                                <p class="text-xs text-gray-500">${request.employee.department}</p>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="text-sm">${request.currentRole.name}</span>
                    </td>
                    <td class="px-6 py-4">
                        <span class="text-sm font-medium">${request.proposedRole.name}</span>
                    </td>
                    <td class="px-6 py-4">
                        <span class="text-sm">${request.appraisalScore}</span>
                    </td>
                    <td class="px-6 py-4">
                        <span class="px-2 py-1 text-xs rounded-full status-${request.status.toLowerCase()}">
                            ${getStatusLabel(request.status)}
                        </span>
                    </td>
                    <td class="px-6 py-4">
                        <span class="text-sm text-gray-500">${formatDate(request.requestedAt)}</span>
                    </td>
                    <td class="px-6 py-4">
                        <div class="flex space-x-2">
                            <button onclick="viewPromotionDetails(${request.id})" class="text-primary-600 hover:text-primary-900">
                                <span class="material-icons-round text-sm">visibility</span>
                            </button>
                            <button onclick="editPromotion(${request.id})" class="text-blue-600 hover:text-blue-900">
                                <span class="material-icons-round text-sm">edit</span>
                            </button>
                            <button onclick="deletePromotion(${request.id})" class="text-red-600 hover:text-red-900">
                                <span class="material-icons-round text-sm">delete</span>
                            </button>
                        </div>
                    </td>
                `;
                allTable.appendChild(row);
            });
        }

        // Form functions
        function resetPromotionForm() {
            document.getElementById('promotionForm').reset();
            document.getElementById('promotionId').value = '';
            document.getElementById('processInstanceId').value = 'PR-' + new Date().getFullYear() + '-' + (promotionRequests.length + 1).toString().padStart(3, '0');
            document.getElementById('effectiveDate').valueAsDate = new Date();
            document.getElementById('promotionStatus').value = 'PENDING';
        }

        function loadEmployeeOptions() {
            const select = document.getElementById('promotionEmployee');
            select.innerHTML = '<option value="">Select Employee</option>';

            employees.forEach(emp => {
                const option = document.createElement('option');
                option.value = emp.id;
                option.textContent = `${emp.name} - ${emp.department} (${emp.jobRole})`;
                select.appendChild(option);
            });
        }

        function loadRoleOptions() {
            const currentSelect = document.getElementById('currentRole');
            const proposedSelect = document.getElementById('proposedRole');

            currentSelect.innerHTML = '<option value="">Select Current Role</option>';
            proposedSelect.innerHTML = '<option value="">Select Proposed Role</option>';

            jobRoles.forEach(role => {
                const option1 = document.createElement('option');
                option1.value = role.id;
                option1.textContent = `${role.name} (Grade ${role.grade}, Level ${role.level})`;
                currentSelect.appendChild(option1);

                const option2 = document.createElement('option');
                option2.value = role.id;
                option2.textContent = `${role.name} (Grade ${role.grade}, Level ${role.level})`;
                proposedSelect.appendChild(option2);
            });
        }

        function savePromotionRequest() {
            const form = document.getElementById('promotionForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            const id = document.getElementById('promotionId').value;
            const employeeId = parseInt(document.getElementById('promotionEmployee').value);
            const currentRoleId = parseInt(document.getElementById('currentRole').value);
            const proposedRoleId = parseInt(document.getElementById('proposedRole').value);

            const employee = employees.find(e => e.id === employeeId);
            const currentRole = jobRoles.find(r => r.id === currentRoleId);
            const proposedRole = jobRoles.find(r => r.id === proposedRoleId);

            const promotionData = {
                processInstanceId: document.getElementById('processInstanceId').value,
                employee: employee,
                currentRole: currentRole,
                proposedRole: proposedRole,
                justification: document.getElementById('justification').value,
                appraisalScore: parseFloat(document.getElementById('appraisalScore').value),
                status: document.getElementById('promotionStatus').value,
                effectiveDate: document.getElementById('effectiveDate').value,
                requestedAt: id ? undefined : new Date().toISOString(),
                approvedAt: id ? undefined : null
            };

            if (id) {
                // Update existing
                const index = promotionRequests.findIndex(p => p.id === parseInt(id));
                if (index !== -1) {
                    promotionRequests[index] = { ...promotionRequests[index], ...promotionData };
                }
            } else {
                // Add new
                const newId = promotionRequests.length > 0 ? Math.max(...promotionRequests.map(p => p.id)) + 1 : 1;
                promotionRequests.push({ id: newId, ...promotionData });
            }

            closeModal('newPromotionModal');
            loadPendingApprovals();
            showNotification('Promotion request saved successfully!', 'success');
        }

        // View promotion details
        function viewPromotionDetails(id) {
            const request = promotionRequests.find(r => r.id === id);
            if (!request) return;

            // Set basic info
            document.getElementById('detailEmployeeName').textContent = request.employee.name;
            document.getElementById('detailRequestId').textContent = `Request ID: ${request.processInstanceId}`;

            // Set status badge
            const statusBadge = document.getElementById('detailStatusBadge');
            statusBadge.className = `px-3 py-1 text-xs rounded-full status-${request.status.toLowerCase()}`;
            statusBadge.textContent = getStatusLabel(request.status);

            // Set role details
            document.getElementById('detailCurrentRole').textContent = request.currentRole.name;
            document.getElementById('detailCurrentGrade').textContent = `Grade ${request.currentRole.grade}`;
            document.getElementById('detailCurrentGrade').className = `grade-badge grade-${request.currentRole.grade}`;
            document.getElementById('detailCurrentLevel').textContent = `Level ${request.currentRole.level}`;
            document.getElementById('detailCurrentSalary').textContent = `$${request.employee.currentSalary}`;

            document.getElementById('detailProposedRole').textContent = request.proposedRole.name;
            document.getElementById('detailProposedGrade').textContent = `Grade ${request.proposedRole.grade}`;
            document.getElementById('detailProposedGrade').className = `grade-badge grade-${request.proposedRole.grade}`;
            document.getElementById('detailProposedLevel').textContent = `Level ${request.proposedRole.level}`;

            // Calculate proposed salary (for demo purposes)
            const proposedSalary = Math.round(request.employee.currentSalary * 1.156);
            document.getElementById('detailProposedSalary').textContent = `$${proposedSalary}`;

            // Salary change
            const salaryChange = calculateSalaryChange(request);
            const salaryChangeEl = document.getElementById('detailSalaryChange');
            salaryChangeEl.textContent = `${salaryChange >= 0 ? '+' : ''}${salaryChange}%`;
            salaryChangeEl.className = salaryChange >= 0 ? 'salary-change-positive' : 'salary-change-negative';
            document.getElementById('detailSalaryProgress').style.width = `${salaryChange}%`;

            // Additional details
            document.getElementById('detailJustification').textContent = request.justification;
            document.getElementById('detailAppraisalScore').textContent = `${request.appraisalScore}/100`;
            document.getElementById('detailScoreBar').style.width = `${request.appraisalScore}%`;
            document.getElementById('detailScoreBar').className = `h-2 rounded-full ${getScoreClass(request.appraisalScore)}`;

            // Dates
            document.getElementById('detailEffectiveDate').textContent = formatDate(request.effectiveDate);
            document.getElementById('detailRequestedAt').textContent = formatDateTime(request.requestedAt);
            document.getElementById('detailApprovedAt').textContent = request.approvedAt ? formatDateTime(request.approvedAt) : 'Not approved yet';

            // Timeline
            document.getElementById('timelineRequested').textContent = formatDateTime(request.requestedAt);
            document.getElementById('timelineReviewed').textContent = request.status === 'IN_REVIEW' ? 'Currently in review' : 'Not yet reviewed';
            document.getElementById('timelineApproved').textContent = request.approvedAt ? formatDateTime(request.approvedAt) : 'Pending approval';
            document.getElementById('timelineEffective').textContent = formatDate(request.effectiveDate);

            // Action buttons
            const actionButtons = document.getElementById('actionButtons');
            actionButtons.innerHTML = '';

            if (request.status === 'PENDING' || request.status === 'IN_REVIEW') {
                actionButtons.innerHTML = `
                    <button onclick="rejectPromotion(${request.id})" class="px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 dark:border-red-700 dark:text-red-400 dark:hover:bg-red-900/30">
                        Reject
                    </button>
                    <button onclick="approvePromotion(${request.id})" class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700">
                        Approve
                    </button>
                `;
            }

            openModal('viewPromotionModal');
        }

        // Edit promotion
        function editPromotion(id) {
            const request = promotionRequests.find(r => r.id === id);
            if (!request) return;

            document.getElementById('promotionId').value = request.id;
            document.getElementById('processInstanceId').value = request.processInstanceId;
            document.getElementById('promotionEmployee').value = request.employee.id;
            document.getElementById('currentRole').value = request.currentRole.id;
            document.getElementById('proposedRole').value = request.proposedRole.id;
            document.getElementById('justification').value = request.justification;
            document.getElementById('appraisalScore').value = request.appraisalScore;
            document.getElementById('promotionStatus').value = request.status;
            document.getElementById('effectiveDate').value = request.effectiveDate;

            // Load options
            loadEmployeeOptions();
            loadRoleOptions();

            // Set values after options are loaded
            setTimeout(() => {
                document.getElementById('promotionEmployee').value = request.employee.id;
                document.getElementById('currentRole').value = request.currentRole.id;
                document.getElementById('proposedRole').value = request.proposedRole.id;
            }, 100);

            openModal('newPromotionModal');
        }

        // Delete promotion
        function deletePromotion(id) {
            if (confirm('Are you sure you want to delete this promotion request?')) {
                promotionRequests = promotionRequests.filter(r => r.id !== id);
                loadAllRequests();
                loadPendingApprovals();
                showNotification('Promotion request deleted successfully!', 'success');
            }
        }

        // Approve promotion
        function approvePromotion(id) {
            const request = promotionRequests.find(r => r.id === id);
            if (!request) return;

            if (confirm(`Approve promotion for ${request.employee.name} from ${request.currentRole.name} to ${request.proposedRole.name}?`)) {
                request.status = 'APPROVED';
                request.approvedAt = new Date().toISOString();

                loadPendingApprovals();
                loadApprovedPromotions();
                closeModal('viewPromotionModal');
                showNotification('Promotion approved successfully!', 'success');
            }
        }

        // Reject promotion
        function rejectPromotion(id) {
            const request = promotionRequests.find(r => r.id === id);
            if (!request) return;

            if (confirm(`Reject promotion for ${request.employee.name} from ${request.currentRole.name} to ${request.proposedRole.name}?`)) {
                request.status = 'REJECTED';
                request.approvedAt = new Date().toISOString();

                loadPendingApprovals();
                closeModal('viewPromotionModal');
                showNotification('Promotion rejected.', 'success');
            }
        }

        // Utility functions
        function calculateSalaryChange(request) {
            // Simplified calculation for demo
            return Math.round(((request.proposedRole.grade - request.currentRole.grade) * 15.6) * 10) / 10;
        }

        function formatDate(dateString) {
            if (!dateString) return 'N/A';
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
        }

        function formatDateTime(dateTimeString) {
            if (!dateTimeString) return 'N/A';
            const date = new Date(dateTimeString);
            return date.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function getStatusLabel(status) {
            const labels = {
                'PENDING': 'Pending',
                'IN_REVIEW': 'In Review',
                'APPROVED': 'Approved',
                'REJECTED': 'Rejected'
            };
            return labels[status] || status;
        }

        function getStatusColor(status) {
            const colors = {
                'PENDING': 'bg-yellow-500',
                'IN_REVIEW': 'bg-blue-500',
                'APPROVED': 'bg-green-500',
                'REJECTED': 'bg-red-500'
            };
            return colors[status] || 'bg-gray-500';
        }

        function getScoreClass(score) {
            if (score >= 90) return 'bg-green-500';
            if (score >= 80) return 'bg-blue-500';
            if (score >= 70) return 'bg-yellow-500';
            return 'bg-red-500';
        }

        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${
                type === 'success' ? 'bg-green-100 text-green-800 border border-green-200' :
                'bg-red-100 text-red-800 border border-red-200'
            }`;
            notification.innerHTML = `
                <div class="flex items-center space-x-3">
                    <span class="material-icons-round">${type === 'success' ? 'check_circle' : 'error'}</span>
                    <span>${message}</span>
                </div>
            `;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadPendingApprovals();

            // Mobile Sidebar Toggle
            const menuToggle = document.getElementById('menuToggle');
            const mobileOverlay = document.getElementById('mobileOverlay');
            const sidebar = document.querySelector('.sidebar-container');

            menuToggle.addEventListener('click', () => {
                sidebar.classList.toggle('open');
                mobileOverlay.classList.toggle('hidden');
                document.body.style.overflow = sidebar.classList.contains('open') ? 'hidden' : 'auto';
            });

            mobileOverlay.addEventListener('click', () => {
                sidebar.classList.remove('open');
                mobileOverlay.classList.add('hidden');
                document.body.style.overflow = 'auto';
            });

            // Theme Toggle
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = themeToggle.querySelector('.material-icons-round');

            themeToggle.addEventListener('click', () => {
                const isDark = document.documentElement.classList.toggle('dark');
                themeIcon.textContent = isDark ? 'light_mode' : 'dark_mode';
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
            });

            // Initialize theme
            if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
                themeIcon.textContent = 'light_mode';
            }

            // Close modals when clicking outside
            window.onclick = function(event) {
                if (event.target.classList.contains('modal')) {
                    event.target.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            }
        });
    </script>
</main>
</body>
</html>